<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>W3 - Failure</title>
    <link rel="icon" type="image/svg+xml" href="./img/webicon.svg" />
    <link rel="stylesheet" href="./styles/base.css" />
    <link rel="stylesheet" href="./styles/projectContent.css" />
  </head>
  <body>
    <nav class="projects-navbar">
      <ul>
        <li><a href="./index.html">home</a></li>
        <li><a href="./completeWork.html">complete_work</a></li>
        <li><a class="active" href="#">the_project</a></li>
      </ul>
    </nav>

    <div class="submenu-wrapper">
      <a href="./theProject.html"><button class="go-back-btn">←</button></a>
      <nav class="project-submenu">
        <ul>
          <li><a href="./projectW1.html">W1</a></li>
          <li><a href="./projectW2.html">W2</a></li>
          <li><a href="./projectW3.html" class="active">W3</a></li>
          <li><a href="./projectW4.html">W4</a></li>
          <li><a href="./projectW5.html">W5</a></li>
          <li><a href="./projectW9.html">W9</a></li>
          <li><a href="./projectW10.html">W10</a></li>
          <li><a href="./projectW11.html">W11</a></li>
        </ul>
      </nav>
    </div>

    <main class="project-content">
      <section class="title-section">
        <h1>//WEEK 03: <span>FAILURE</span></h1>
        <hr class="separator" />
      </section>

      <section class="typography-section">
        <div class="summary-group">
          <h2>about</h2>
          <p>
            This project is about how failure is part of learning, and how
            sometimes, no matter how hard you try, you still don’t “win” — and
            that’s okay.
            <br />
            <br />
            The user types to try and spell the word "FAILURE", but the project
            never lets you finish it. The more you try, the more you fail — and
            that’s the whole point. You’re supposed to fail.
            <br />
            <br />
            It’s not about completing the word, it’s about feeling the
            frustration, and understanding that growth comes from trying again,
            even when success isn’t guaranteed. There’s no win here — just the
            experience of failure, and the message that failing is part of
            moving forward.
          </p>
        </div>
        <div class="typography-group">
          <h2>type in the words</h2>
          <div id="typography-canvas" class="typography-canvas week3"></div>

          <div id="on-screen-keyboard" class="on-screen-keyboard">
            <div class="keyboard-row">
              <button class="key" data-key="Q">Q</button>
              <button class="key" data-key="W">W</button>
              <button class="key" data-key="E">E</button>
              <button class="key" data-key="R">R</button>
              <button class="key" data-key="T">T</button>
              <button class="key" data-key="Y">Y</button>
              <button class="key" data-key="U">U</button>
              <button class="key" data-key="I">I</button>
              <button class="key" data-key="O">O</button>
              <button class="key" data-key="P">P</button>
            </div>
            <div class="keyboard-row">
              <button class="key" data-key="A">A</button>
              <button class="key" data-key="S">S</button>
              <button class="key" data-key="D">D</button>
              <button class="key" data-key="F">F</button>
              <button class="key" data-key="G">G</button>
              <button class="key" data-key="H">H</button>
              <button class="key" data-key="J">J</button>
              <button class="key" data-key="K">K</button>
              <button class="key" data-key="L">L</button>
            </div>
            <div class="keyboard-row">
              <button class="key" data-key="Z">Z</button>
              <button class="key" data-key="X">X</button>
              <button class="key" data-key="C">C</button>
              <button class="key" data-key="V">V</button>
              <button class="key" data-key="B">B</button>
              <button class="key" data-key="N">N</button>
              <button class="key" data-key="M">M</button>
            </div>
          </div>
        </div>
      </section>

      <section class="typography-section originalWork">
        <div class="rationale-group">
          <h2>rationale</h2>
          <p>
            The poster shows that failure is just a step, not the end. The words
            "START TRYING" stand out, while "STOP" is scratched out, replaced
            with a clearer, stronger message.
            <br />
            <br />
            At first, the layout looks rough, with distorted letters, but as you
            move across, it becomes more structured, showing progress. The
            bright red and white colors add energy, symbolizing determination
            even when things feel impossible. Every element reinforces the
            message: Failure isn’t final unless you quit. Keep going.
          </p>
        </div>
        <div class="work-group">
          <div class="card">
            <img class="front" src="./img/failure.png" alt="Front Image" />
            <img class="back" src="./img/failure(back).png" alt="Back Image" />
          </div>
        </div>
      </section>
    </main>

    <script src="./scripts/projectSketch.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
    <script src="./scripts/typographySketchW3.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const keyboard = document.getElementById("on-screen-keyboard");
        // Only run if the keyboard exists on the page
        if (keyboard) {
          const keys = keyboard.querySelectorAll(".key");

          keys.forEach((button) => {
            // Use 'touchstart' for quicker response on mobile, fallback to 'click'
            button.addEventListener("touchstart", (e) => {
              e.preventDefault(); // Prevent potential double-triggering with click
              triggerP5Key(button);
            });
            // Include 'click' as a fallback or for desktop testing
            button.addEventListener("click", (e) => {
              // Check if touchstart already handled it (simple flag)
              if (!button.dataset.touched) {
                triggerP5Key(button);
              }
              // Reset flag
              delete button.dataset.touched;
            });
          });

          function triggerP5Key(button) {
            const keyValue = button.getAttribute("data-key");
            if (keyValue) {
              // Mark as touched to prevent click firing immediately after
              button.dataset.touched = "true";
              setTimeout(() => delete button.dataset.touched, 50); // Reset flag shortly after

              // Simulate p5.js global keyTyped()
              // 1. Set the global 'key' variable p5 reads
              window.key = keyValue; // p5 uses this global variable

              // 2. Manually call the global keyTyped function defined in the sketch
              if (typeof window.keyTyped === "function") {
                window.keyTyped(); // Execute the function from typographySketchW3.js
              } else {
                console.error(
                  "p5.js keyTyped function not found in global scope."
                );
              }

              // Optional: Visual feedback - briefly highlight the key
              button.classList.add("active-key-feedback");
              setTimeout(() => {
                button.classList.remove("active-key-feedback");
              }, 150);
            }
          }
        }
      });
    </script>
    <script>
      // Find the card element
      const cardElement = document.querySelector(".card");

      // Add a click listener
      cardElement.addEventListener("click", function () {
        // Toggle the 'flip' class on the card element
        cardElement.classList.toggle("flip");
      });
    </script>
  </body>
</html>
